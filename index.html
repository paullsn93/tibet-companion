<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tibet Companion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        /* Drawer Transition */
        .drawer-enter-active,
        .drawer-leave-active {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }

        .drawer-enter-from,
        .drawer-leave-to {
            transform: translateY(100%);
            opacity: 0;
        }

        /* Backdrop Transition */
        .fade-enter-active,
        .fade-leave-active {
            transition: opacity 0.3s ease;
        }

        .fade-enter-from,
        .fade-leave-to {
            opacity: 0;
        }
    </style>
</head>



<body
    class="bg-slate-950 text-slate-100 h-screen w-screen overflow-hidden flex flex-col items-center selection:bg-cyan-500/30 touch-none">

    <div id="app"
        class="w-full max-w-[1600px] h-full flex flex-col md:flex-row md:gap-8 md:p-8 relative overflow-hidden">

        <!-- Desktop Sidebar (md:block hidden) -->
        <aside
            class="hidden md:flex flex-col w-[360px] h-full bg-slate-900/50 backdrop-blur-md border border-slate-800 rounded-3xl overflow-hidden shrink-0 shadow-2xl">
            <!-- Sidebar Header -->
            <div class="p-8 border-b border-slate-800 bg-slate-900/80">
                <h1
                    class="text-2xl font-black bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent flex items-center gap-2">
                    <span class="material-icons-outlined text-cyan-400 text-3xl">landscape</span>
                    Tibet Companion
                </h1>
                <p class="text-sm text-slate-500 mt-2 font-medium tracking-wide">Ë•øËóèÊóÖ‰º¥ 12Êó•Ë°åÁ®ãÂä©Êâã</p>
            </div>

            <!-- Sidebar List -->
            <div class="flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar sidebar-scroll">
                <button v-for="(day, idx) in itinerary" :key="idx" @click="selectDay(idx)"
                    class="w-full text-left p-4 rounded-xl transition-all flex items-center gap-4 group relative overflow-hidden"
                    :class="currentIndex === idx ? 'bg-cyan-900/20 border border-cyan-500/30' : 'hover:bg-slate-800/50 border border-transparent'">
                    <div v-if="currentIndex === idx" class="absolute left-0 top-0 bottom-0 w-1.5 bg-cyan-500"></div>
                    <div class="w-10 h-10 rounded-xl flex items-center justify-center shrink-0 font-mono font-bold text-lg transition-colors"
                        :class="currentIndex === idx ? 'bg-cyan-500 text-white shadow-lg shadow-cyan-500/20' : 'bg-slate-800 text-slate-400 group-hover:bg-slate-700 group-hover:text-slate-200'">
                        {{ day.day }}
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center justify-between">
                            <span class="text-base font-bold truncate"
                                :class="currentIndex === idx ? 'text-cyan-100' : 'text-slate-300 group-hover:text-white'">
                                {{ day.locations[day.locations.length - 1] }}
                            </span>
                        </div>
                        <div class="flex items-center gap-2 text-sm mt-1">
                            <span class="text-slate-500 group-hover:text-slate-400 truncate">{{ day.title }}</span>
                            <span
                                class="ml-auto px-2 py-0.5 rounded bg-slate-950 text-slate-400 font-mono border border-slate-800 whitespace-nowrap text-xs"
                                :class="{'text-amber-400 border-amber-900/30': day.altitude.sleep > 3500}">
                                {{ day.altitude.sleep }}m
                            </span>
                        </div>
                    </div>
                </button>
            </div>

            <!-- Sidebar Footer -->
            <div class="p-4 border-t border-slate-800 bg-slate-900/30 text-center">
                <button @click="resetToToday"
                    class="text-sm text-cyan-500 hover:text-cyan-400 font-bold tracking-wider uppercase flex items-center justify-center gap-2 w-full py-3 rounded-xl hover:bg-cyan-950/30 transition-colors">
                    <span class="material-icons-outlined text-lg">today</span>
                    Back to Today
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 w-full h-full flex flex-col relative overflow-hidden">
            <!-- Scrollable Content Container (Crucial Fix: flex-1, overflow-y-auto, touch-scrolling) -->
            <!-- ADDED ID="main-content-scroll" to fix querySelector issue -->
            <div id="main-content-scroll"
                class="flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar px-4 pt-4 md:px-0 md:pt-0 scroll-smooth touch-pan-y"
                style="-webkit-overflow-scrolling: touch; padding-bottom: 7rem;">
                <!-- Added pb-32 to prevent bottom nav from covering content -->
                <div class="max-w-4xl mx-auto space-y-8 md:space-y-10 md:pb-8">

                    <!-- Header Section -->
                    <header
                        class="text-center space-y-4 mt-6 md:mt-0 transition-all duration-300 cursor-pointer md:cursor-default active:scale-95 md:active:scale-100 group flex-none"
                        v-if="currentDay" @click="width < 768 ? isDrawerOpen = true : null">
                        <!-- Top Info Bar + Menu Trigger -->
                        <div class="flex items-center justify-center gap-3 relative">
                            <!-- Menu Trigger (Mobile) -->
                            <div
                                class="md:hidden inline-flex items-center gap-2 px-4 py-2 rounded-full bg-slate-900 border border-slate-800 text-base text-slate-300 font-mono tracking-wide shadow-lg">
                                <span class="material-icons-outlined text-xl">menu</span>
                                {{ currentDay.date }}
                                <span v-if="isToday" class="text-emerald-400 font-bold ml-2 animate-pulse">‚óè</span>
                            </div>

                            <!-- Map Button (New) -->
                            <button v-if="currentDay.map_url" @click.stop="openMap(currentDay.map_url)"
                                class="inline-flex items-center gap-2 px-6 py-2 rounded-full bg-teal-600 hover:bg-teal-500 text-white text-base md:text-lg font-bold shadow-lg shadow-teal-500/20 active:scale-95 transition-all">
                                <span class="material-icons-outlined text-xl">map</span>
                                ÈñãÂïüÂú∞Âúñ
                            </button>
                        </div>

                        <!-- Outdoor Mode: HUGE Titles -->
                        <h1
                            class="text-5xl md:text-7xl lg:text-8xl font-black bg-gradient-to-br from-white via-slate-200 to-slate-500 bg-clip-text text-transparent drop-shadow-xl flex items-center justify-center gap-3 py-4 md:py-6 tracking-tight leading-none">
                            Day {{ currentDay.day }}
                            <span
                                class="material-icons-outlined text-slate-600 text-5xl group-hover:text-cyan-400 transition-colors md:hidden">expand_more</span>
                        </h1>


                        <div class="flex items-center justify-center gap-3 text-cyan-400/90 font-medium">
                            <span class="material-icons-outlined text-3xl">place</span>
                            <span class="text-2xl md:text-4xl tracking-wide font-bold">{{ formattedLocations }}</span>
                        </div>

                        <p
                            class="text-slate-300 text-xl md:text-2xl font-medium border-t border-slate-800/80 pt-6 mx-4 md:mx-20 leading-relaxed tracking-wide min-h-[3rem]">
                            {{ currentDay.title }}</p>
                    </header>

                    <!-- Loading / Error States -->
                    <div v-if="loading" class="flex flex-col items-center justify-center h-64 gap-6 text-slate-500">
                        <div class="w-16 h-16 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin">
                        </div>
                        <p class="text-xl font-mono">ËºâÂÖ•Ë°åÁ®ãË≥áÊñô‰∏≠...</p>
                    </div>

                    <div v-else-if="error"
                        class="bg-red-950/30 border border-red-900/50 p-8 rounded-3xl text-center space-y-4 mx-4">
                        <span class="material-icons-outlined text-red-500 text-6xl">error_outline</span>
                        <h3 class="text-red-400 text-3xl font-bold">ÁÑ°Ê≥ïËÆÄÂèñË≥áÊñô</h3>
                        <p class="text-red-300/70 text-lg">{{ error }}</p>
                    </div>

                    <!-- Dashboard Grid (md:grid-cols-2) -->
                    <div v-else-if="currentDay" class="space-y-8 md:space-y-0 md:grid md:grid-cols-2 md:gap-8">

                        <!-- Altitude Card -->
                        <div
                            class="bg-slate-900/80 backdrop-blur-sm rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-slate-800 relative overflow-hidden h-full">
                            <div v-if="isHighAltitude"
                                class="absolute top-0 right-0 bg-red-500/20 text-red-400 text-sm px-5 py-2.5 rounded-bl-3xl font-bold border-l border-b border-red-500/30 flex items-center gap-2 backdrop-blur-md z-10">
                                <span class="material-icons-outlined text-lg animate-pulse">warning</span>
                                È´òÊµ∑ÊãîÊ≥®ÊÑè
                            </div>

                            <h3
                                class="text-slate-500 text-base font-bold uppercase tracking-[0.2em] mb-8 flex items-center gap-3">
                                <span class="material-icons-outlined text-2xl">landscape</span>
                                Êµ∑ÊãîÁõ£Êéß Altitude
                            </h3>

                            <div class="space-y-8"> <!-- Stacked layout for mobile clarity, or grid -->
                                <div class="grid grid-cols-1 gap-6">
                                    <div class="text-center p-8 bg-slate-950 rounded-3xl border border-slate-800/50">
                                        <div class="text-sm text-slate-500 uppercase tracking-widest mb-2 font-bold">ÊúÄÈ´ò
                                            (Max)</div>
                                        <div class="font-mono font-black tracking-tight leading-none" :class="[
                                                currentDay.altitude.max > 3500 ? 'text-amber-400' : 'text-slate-200',
                                                'text-7xl md:text-8xl'
                                             ]">
                                            {{ currentDay.altitude.max }}<span
                                                class="text-2xl ml-2 text-slate-600 font-bold align-baseline">m</span>
                                        </div>
                                    </div>

                                    <div class="text-center p-8 bg-slate-950 rounded-3xl border border-slate-800/50">
                                        <div class="text-sm text-slate-500 uppercase tracking-widest mb-2 font-bold">‰ΩèÂÆø
                                            (Sleep)</div>
                                        <div class="font-mono font-black tracking-tight leading-none" :class="[
                                                currentDay.altitude.sleep > 3000 ? 'text-red-400' : 'text-emerald-400',
                                                'text-7xl md:text-8xl'
                                             ]">
                                            {{ currentDay.altitude.sleep }}<span
                                                class="text-2xl ml-2 text-slate-600 font-bold align-baseline">m</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Weather Card -->
                        <div
                            class="bg-slate-900/80 backdrop-blur-sm rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-slate-800 h-full flex flex-col justify-center">
                            <h3
                                class="text-slate-500 text-base font-bold uppercase tracking-[0.2em] mb-6 flex items-center gap-3">
                                <span class="material-icons-outlined text-2xl text-sky-400">wb_sunny</span>
                                Á©øË°£ÊåáÂºï Wear
                            </h3>
                            <p
                                class="text-slate-200 text-xl md:text-2xl leading-loose font-medium tracking-wide border-l-4 border-sky-500/50 pl-6 py-2">
                                {{ currentDay.weather_advice }}
                            </p>
                        </div>

                        <!-- Highlights (Spans 2 columns on Desktop) -->
                        <div
                            class="bg-slate-900/80 backdrop-blur-sm rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-slate-800 md:col-span-2">
                            <h3
                                class="text-slate-500 text-base font-bold uppercase tracking-[0.2em] mb-6 flex items-center gap-3">
                                <span class="material-icons-outlined text-2xl text-purple-400">auto_awesome</span>
                                ‰ªäÊó•‰∫ÆÈªû Highlights
                            </h3>
                            <ul class="grid md:grid-cols-2 gap-6">
                                <li v-for="(item, idx) in currentDay.highlights" :key="idx"
                                    class="flex items-start gap-5 group/item bg-slate-800/30 rounded-2xl p-6 transition-colors">
                                    <div
                                        class="mt-2 w-3 h-3 rounded-full bg-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.6)] shrink-0">
                                    </div>
                                    <span class="text-slate-200 text-xl md:text-2xl leading-relaxed font-medium">{{ item
                                        }}</span>
                                </li>
                            </ul>
                        </div>

                        <!-- Safety Tips (Spans 2 columns on Desktop) -->
                        <div
                            class="bg-gradient-to-br from-amber-950/40 to-orange-950/20 rounded-[2.5rem] p-8 md:p-10 shadow-2xl border border-amber-900/40 relative overflow-hidden md:col-span-2">
                            <div class="absolute top-0 right-0 p-8 opacity-10 pointer-events-none">
                                <span class="material-icons-outlined text-9xl text-amber-500">lightbulb</span>
                            </div>
                            <h3
                                class="text-amber-500/90 text-base font-bold uppercase tracking-[0.2em] mb-6 flex items-center gap-3 relative z-10">
                                <span class="material-icons-outlined text-2xl">tips_and_updates</span>
                                Ë≤ºÂøÉÂèÆÂöÄ Tips
                            </h3>
                            <p
                                class="text-amber-50 text-xl md:text-2xl leading-loose font-medium relative z-10 tracking-wide">
                                {{ currentDay.tips }}
                            </p>
                        </div>

                        <!-- Health Tracker (Spans 2 columns on Desktop) -->
                        <div class="bg-slate-800 rounded-[2.5rem] p-6 shadow-2xl border border-slate-700 md:col-span-2">
                            <div class="flex justify-between items-center mb-6 px-2">
                                <h3 class="text-2xl font-bold text-slate-200 flex items-center gap-3">
                                    <span class="material-icons-outlined text-red-500">favorite</span>
                                    ÂÅ•Â∫∑Áõ£Êéß (Health Log)
                                </h3>
                                <button @click="copyHealthRecords"
                                    class="flex items-center gap-2 text-slate-400 hover:text-cyan-400 transition-colors bg-slate-900/50 px-4 py-2 rounded-xl text-sm font-bold border border-slate-700/50">
                                    <span class="material-icons-outlined text-lg">content_copy</span>
                                    Ë§áË£Ω
                                </button>
                            </div>

                            <!-- Input Group -->
                            <div class="grid grid-cols-3 gap-4 mb-8">
                                <div class="relative">
                                    <input v-model.number="newSpo2" type="number" placeholder="SpO2"
                                        class="w-full bg-slate-900 border border-slate-600 rounded-2xl px-4 py-4 text-2xl text-white placeholder-slate-600 focus:outline-none focus:border-cyan-500 transition-colors text-center font-mono font-bold">
                                    <span
                                        class="absolute right-3 bottom-3 text-xs text-slate-500 pointer-events-none font-bold">
                                        %</span>
                                </div>
                                <div class="relative">
                                    <input v-model.number="newHr" type="number" placeholder="HR"
                                        class="w-full bg-slate-900 border border-slate-600 rounded-2xl px-4 py-4 text-2xl text-white placeholder-slate-600 focus:outline-none focus:border-cyan-500 transition-colors text-center font-mono font-bold">
                                    <span
                                        class="absolute right-3 bottom-3 text-xs text-slate-500 pointer-events-none font-bold">
                                        bpm</span>
                                </div>
                                <button @click="addHealthRecord"
                                    class="bg-teal-600 hover:bg-teal-500 text-white rounded-2xl font-bold text-xl shadow-lg shadow-teal-900/50 active:scale-95 transition-all flex items-center justify-center">
                                    Ë®òÈåÑ
                                </button>
                            </div>

                            <!-- List Area -->
                            <div class="space-y-3 min-h-[100px]">
                                <div v-if="currentDateRecords.length === 0"
                                    class="text-center text-slate-500 py-6 text-lg font-medium border-2 border-dashed border-slate-700/50 rounded-2xl">
                                    Â∞öÁÑ°‰ªäÊó•Á¥ÄÈåÑ
                                </div>
                                <transition-group name="list" tag="div" class="space-y-3">
                                    <div v-for="record in currentDateRecords" :key="record.id"
                                        class="flex items-center justify-between bg-slate-900/80 rounded-2xl p-5 border border-slate-700/50 hover:border-slate-600 transition-colors">
                                        <div class="flex items-center gap-4 md:gap-8">
                                            <span class="text-slate-400 font-mono text-lg font-bold">{{ record.time
                                                }}</span>
                                            <div class="flex items-center gap-6">
                                                <div class="flex flex-col">
                                                    <span
                                                        class="text-[10px] text-slate-500 uppercase tracking-wider font-black">SpO2</span>
                                                    <span class="text-2xl font-mono font-black"
                                                        :class="record.spo2 < 80 ? 'text-red-500' : 'text-cyan-300'">{{
                                                        record.spo2 }}%</span>
                                                </div>
                                                <div class="flex flex-col">
                                                    <span
                                                        class="text-[10px] text-slate-500 uppercase tracking-wider font-black">HR</span>
                                                    <span class="text-2xl font-mono font-black text-slate-200">{{
                                                        record.hr
                                                        }}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <button @click="deleteHealthRecord(record.id)"
                                            class="text-slate-600 hover:text-red-400 p-3 bg-slate-800/50 rounded-xl transition-colors">
                                            <span class="material-icons-outlined text-xl">delete</span>
                                        </button>
                                    </div>
                                </transition-group>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Navigation (Mobile Only) - Fixed to Bottom -->
            <footer
                class="md:hidden flex-none fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-xl border-t border-slate-700 pb-safe-area shadow-[0_-4px_20px_rgba(0,0,0,0.5)]">
                <div class="flex items-center justify-between p-3 max-w-md mx-auto w-full">
                    <button @click="changeDay(-1)" :disabled="currentIndex === 0"
                        class="w-12 h-12 rounded-full flex items-center justify-center transition-all bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 border border-slate-700">
                        <span class="material-icons-outlined text-2xl">arrow_back</span>
                    </button>

                    <div class="flex flex-col items-center select-none cursor-pointer active:scale-95 transition-transform px-6 py-1 rounded-2xl active:bg-slate-800"
                        @click="isDrawerOpen = true" role="button" title="ÈñãÂïüÂø´ÈÄüÈÅ∏ÂñÆ">
                        <span class="text-[10px] uppercase tracking-[0.2em] text-slate-500 font-bold mb-0.5">DAY</span>
                        <span class="text-xl font-mono font-black text-slate-100 leading-none">{{ currentDay ?
                            currentDay.day : '-' }}<span class="text-sm text-slate-600 font-medium ml-1">/{{
                                itinerary.length }}</span></span>
                    </div>

                    <button @click="changeDay(1)" :disabled="!currentDay || currentIndex === itinerary.length - 1"
                        class="w-12 h-12 rounded-full flex items-center justify-center transition-all bg-teal-600 text-white shadow-[0_2px_10px_rgba(13,148,136,0.3)] hover:bg-teal-500 disabled:opacity-30 disabled:cursor-not-allowed disabled:shadow-none active:scale-95 border border-teal-500">
                        <span class="material-icons-outlined text-2xl">arrow_forward</span>
                    </button>
                </div>
                <!-- Safe area padding for iPhone X+ -->
                <div class="h-4 w-full md:hidden"></div>
            </footer>
        </main>

        <!-- Navigation Drawer (Mobile Only Modal) -->
        <teleport to="body">
            <!-- Backdrop -->
            <transition name="fade">
                <div v-if="isDrawerOpen && width < 768" @click="isDrawerOpen = false"
                    class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 md:hidden touch-none"></div>
            </transition>

            <!-- Drawer Content -->
            <transition name="drawer">
                <div v-if="isDrawerOpen && width < 768"
                    class="fixed bottom-0 left-0 right-0 bg-slate-900 rounded-t-[2.5rem] z-50 max-h-[85vh] h-[80vh] overflow-hidden flex flex-col shadow-[0_-4px_20px_rgba(0,0,0,0.5)] border-t border-slate-700 md:hidden pb-safe-area">
                    <!-- Drawer Handle -->
                    <div class="w-full flex justify-center pt-5 pb-3" @click="isDrawerOpen = false">
                        <div class="w-16 h-1.5 bg-slate-700 rounded-full"></div>
                    </div>

                    <!-- Drawer Header -->
                    <div class="px-8 py-4 border-b border-slate-800 flex justify-between items-center shrink-0">
                        <h2 class="text-2xl font-bold text-slate-200">Âø´ÈÄüË∑≥ËΩâ</h2>
                        <button @click="isDrawerOpen = false"
                            class="text-slate-400 hover:text-white transition-colors p-2 bg-slate-800/50 rounded-full">
                            <span class="material-icons-outlined text-2xl">close</span>
                        </button>
                    </div>

                    <!-- Scrollable List -->
                    <div class="flex-1 overflow-y-auto p-6 space-y-4 pb-12 custom-scrollbar touch-pan-y"
                        style="-webkit-overflow-scrolling: touch;">
                        <button v-for="(day, idx) in itinerary" :key="idx" @click="selectDay(idx)"
                            class="w-full text-left p-6 rounded-3xl transition-all flex items-center gap-5 group relative overflow-hidden"
                            :class="currentIndex === idx ? 'bg-cyan-900/30 border-2 border-cyan-500/50 shadow-[0_0_20px_rgba(8,145,178,0.3)]' : 'bg-slate-800/50 border-2 border-slate-800 hover:bg-slate-800'">
                            <div class="w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 font-mono font-bold text-xl shadow-lg"
                                :class="currentIndex === idx ? 'bg-cyan-500 text-white' : 'bg-slate-700 text-slate-400 group-hover:bg-slate-600 group-hover:text-slate-200'">
                                {{ day.day }}
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-bold text-xl truncate pr-2"
                                        :class="currentIndex === idx ? 'text-cyan-100' : 'text-slate-300 group-hover:text-white'">
                                        {{ day.locations[day.locations.length - 1] }}
                                    </span>
                                    <span
                                        class="text-sm px-3 py-1 rounded-lg bg-slate-900 text-slate-400 font-mono border border-slate-700 font-bold">
                                        {{ day.altitude.sleep }}m
                                    </span>
                                </div>
                                <div class="text-base truncate w-full font-medium"
                                    :class="currentIndex === idx ? 'text-cyan-300/80' : 'text-slate-500 group-hover:text-slate-400'">
                                    {{ day.title }}
                                </div>
                            </div>
                            <span v-if="currentIndex === idx"
                                class="material-icons-outlined text-cyan-500 text-3xl font-bold">check</span>
                        </button>
                    </div>
                </div>
            </transition>
        </teleport>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, onUnmounted } = Vue;

        // Inline Data to Prevent Fetch Errors or CORS issues on Mobile Browsers
        const itineraryData = [
            {
                "day": 1,
                "date": "2026-03-27",
                "title": "ÂïüÁ®ãÔºöÂâçÂæÄËΩâÊ©üÈªû",
                "locations": ["Ê°ÉÂúí", "Ê∑±Âú≥"],
                "altitude": { "avg": 50, "max": 100, "sleep": 50 },
                "weather_advice": "ËàíÈÅ© (20¬∞C)ÔºåÁ©øËëóËºï‰æøÔºåÊ∫ñÂÇôÊòéÂ§©Êó©Ëµ∑„ÄÇ",
                "highlights": ["Ê°ÉÂúíÊ©üÂ†¥Âá∫Áôº (13:40)", "ÊäµÈÅîÊ∑±Âú≥ (15:50)", "‰∫´Áî®Áï∂Âú∞Á¥†È£üÊôöÈ§ê"],
                "stay": "Ê∑±Âú≥Âá±ÊÇÖÂòâËªíÈÖíÂ∫ó",
                "tips": "‰ªäÊôöË´ãÊó©Èªû‰ºëÊÅØÔºåÊòéÂ§©‰∏ÄÊó©Ë¶ÅÈ£õÂæÄÈ´òÂéüÔºåÁù°Áú†ÂÖÖË∂≥ÊòØÈ†êÈò≤È´òÂèçÁöÑÁ¨¨‰∏ÄÊ≠•„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=Ê∑±Âú≥Âá±ÊÇÖÂòâËªíÈÖíÂ∫ó"
            },
            {
                "day": 2,
                "date": "2026-03-28",
                "title": "ÂàùÊäµÈ´òÂéüÔºöË•øËóèÊ±üÂçó",
                "locations": ["Ê∑±Âú≥", "ÊûóËäù", "È≠ØÊúó"],
                "altitude": { "avg": 3000, "max": 4720, "sleep": 2900 },
                "weather_advice": "Ê∂ºÁàΩ (5-15¬∞C)ÔºåÊäµÈÅîÂæåÁ´ãÂàªÁ©ø‰∏äÈò≤È¢®Â§ñÂ•óÔºåÊà¥Â∏ΩÂ≠ê„ÄÇ",
                "highlights": ["È£õË∂äÈõ™Â±±ÊäµÈÅîÊûóËäù (11:00)", "ÂìàÈÅîËøéË≥ìÂÑÄÂºè", "Ëâ≤Â≠£ÊãâÂ±±Âè£ÈÅ†Áú∫ÂçóËø¶Â∑¥Áì¶Â≥∞", "È≠ØÊúóÊûóÊµ∑ËßÄÊôØÂè∞"],
                "stay": "ÊûóËäùÂçöÊ≥∞ÊûóËäùÂ§ßÈÖíÂ∫ó",
                "tips": "‰ªäÊó•Âãï‰ΩúË¶ÅÊÖ¢ÔºÅÂàáË®ò‰∏çË¶ÅÊ¥óÊæ°Ê¥óÈ†≠ÔºåÂ§öÂñùÊ∞¥ÔºåÈÅ©ÊáâÊµ∑Êãî 3000m„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=ÊûóËäùÂçöÊ≥∞ÊûóËäùÂ§ßÈÖíÂ∫ó"
            },
            {
                "day": 3,
                "date": "2026-03-29",
                "title": "ÂâçÂæÄËÅñÂüéÔºöÊûóÊãâÂÖ¨Ë∑Ø",
                "locations": ["ÊûóËäù", "ÊãâËñ©"],
                "altitude": { "avg": 3200, "max": 5013, "sleep": 3650 },
                "weather_advice": "Êó•ÁÖßÂº∑ (3-16¬∞C)ÔºåÊ¥ãËî•ÂºèÁ©øÊê≠ÔºåÂ¢®Èè°ÂøÖÂÇô„ÄÇ",
                "highlights": ["ÊûóÊãâÈ´òÁ≠âÁ¥öÂÖ¨Ë∑Ø (ÊúÄÁæéÊôØËßÄÂ§ßÈÅì)", "Ëâ≤ÊãâÂØ∫ (‰∏ãÂçàÁúãËæØÁ∂ì)", "ÂÖ´ÂªìË°óËΩâÁ∂ìÈÅì", "ËóèË£ùÊóÖÊãçÈ´îÈ©ó"],
                "stay": "ÊãâËñ©ÁëûÂêâÂ∫¶ÂÅáÈÖíÂ∫ó (‰∫îÊòü)",
                "tips": "‰ªäÊôöÂÖ•‰ΩèÊãâËñ© (3650m)ÔºåÂèØËÉΩÊúÉÊÑüÂà∞ËºïÂæÆÈ†≠ÁóõÊàñÁù°‰∏çÂ•ΩÔºåÂ±¨Ê≠£Â∏∏ÁèæË±°„ÄÇÂãï‰ΩúÊîæÊÖ¢„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=ÊãâËñ©ÁëûÂêâÂ∫¶ÂÅáÈÖíÂ∫ó"
            },
            {
                "day": 4,
                "date": "2026-03-30",
                "title": "ËÅñÂüéÂ∑°Á¶ÆÔºö‰∏ñÁïåÈÅ∫Áî¢",
                "locations": ["ÊãâËñ©"],
                "altitude": { "avg": 3650, "max": 3700, "sleep": 3650 },
                "weather_advice": "‰πæÁá• (2-15¬∞C)ÔºåÂä†Âº∑‰øùÊøïÔºåÊ≥®ÊÑèÈò≤Êõ¨„ÄÇ",
                "highlights": ["Â∏ÉÈÅîÊãâÂÆÆ (ÈúÄÊîÄÁà¨ÈöéÊ¢ØÔºåË´ãÊÖ¢Ë°å)", "Â§ßÊò≠ÂØ∫ (Ë¶∫Ê≤É‰Ωõ)", "Ëó•ÁéãÂ±±ËßÄÊôØÂè∞ (ÊãçÂ∏ÉÈÅîÊãâÂÆÆÂÄíÂΩ±)"],
                "stay": "ÊãâËñ©ÁëûÂêâÂ∫¶ÂÅáÈÖíÂ∫ó",
                "tips": "Â∏ÉÈÅîÊãâÂÆÆÈöéÊ¢ØÂ§öÔºåË´ãË™øÊï¥ÂëºÂê∏Ôºå‰∏çË¶ÅÈÄûÂº∑„ÄÇÂ§öÂñùÊ∞¥‰ª£Ë¨ù‰π≥ÈÖ∏„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=ÊãâËñ©Â∏ÉÈÅîÊãâÂÆÆ"
            },
            {
                "day": 5,
                "date": "2026-03-31",
                "title": "ËÅñÊπñËàáÂÜ∞Â∑ùÔºöÂæåËóè‰πãË∑Ø",
                "locations": ["ÊãâËñ©", "ÁæäÂçìÈõçÊé™", "Êó•ÂñÄÂâá"],
                "altitude": { "avg": 4000, "max": 5030, "sleep": 3840 },
                "weather_advice": "È¢®Â§ßÂØíÂÜ∑ (0-12¬∞C)ÔºåÂ±±Âè£È¢®ÈùûÂ∏∏Â§ßÔºåÂãôÂøÖÊà¥ÊØõÂ∏ΩÂúçÂ∑æ„ÄÇ",
                "highlights": ["Â¥óÂ∑¥ÊãâÂ±±Âè£ (‰øØÁû∞ÁæäÊπñ)", "ÁæäÂçìÈõçÊé™ (‰∏âÂ§ßËÅñÊπñ‰πã‰∏Ä)", "Âç°Ëã•ÊãâÂÜ∞Â∑ù (‰πÉÊ¨ΩÂ∫∑Ê°ëÈõ™Â±±)", "Ê±üÂ≠úÂÆóÂ±±Âè§Â†° (ÈÅ†Áú∫)"],
                "stay": "Êó•ÂñÄÂâáÂ∏åÁàæÈ†ìÈÖíÂ∫ó",
                "tips": "‰ªäÊó•ËªäÁ®ãËºÉÈï∑ÔºåÊúÉÁøªË∂äÊµ∑Êãî 5000m ÁöÑÂ±±Âè£Ôºå‰∏ãËªäÊãçÁÖßÂãï‰ΩúË¶ÅÊÖ¢„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=Êó•ÂñÄÂâáÂ∏åÁàæÈ†ìÈÖíÂ∫ó"
            },
            {
                "day": 6,
                "date": "2026-04-01",
                "title": "Â∑îÂ≥∞ÊåëÊà∞ÔºöÁè†Â≥∞Â§ßÊú¨Ááü",
                "locations": ["Êó•ÂñÄÂâá", "Áè†Â≥∞Â§ßÊú¨Ááü"],
                "altitude": { "avg": 4500, "max": 5200, "sleep": 5200 },
                "weather_advice": "Ê•µÂØí (-10 ~ 5¬∞C)ÔºåÁæΩÁµ®Ë°£„ÄÅÁôºÁÜ±Ë§≤ÂÖ®ÂâØÊ≠¶Ë£ù„ÄÇ",
                "highlights": ["Âä†ÁÉèÊãâÂ±±Âè£ (ËßÄË≥û 4 Â∫ß 8000m Èõ™Â±±)", "Áµ®Â∏ÉÂØ∫ (‰∏ñÁïåÊúÄÈ´òÂØ∫Âªü)", "Áè†Â≥∞Â§ßÊú¨Ááü (Á≠âÂæÖÊó•ËêΩÈáëÂ±±)"],
                "stay": "Áè†Â≥∞Â§ßÊú¨ÁáüÂ∏≥ÁØ∑/Ê∞ëÂÆø",
                "tips": "‰ªäÊôöÁù°Âú® 5200mÔºåÊòØÂÖ®Á®ãÊúÄÈ´òÊåëÊà∞„ÄÇÈö®Ë∫´ÊîúÂ∏∂Ê∞ßÊ∞£Áì∂ÔºåÂçäÂ§ú‰∏äÂªÅÊâÄË¶ÅÁ©øÊöñ„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=Áè†Â≥∞Â§ßÊú¨Ááü"
            },
            {
                "day": 7,
                "date": "2026-04-02",
                "title": "ÂëäÂà•Áè†Â≥∞ÔºöËøîÂõûÊó•ÂñÄÂâá",
                "locations": ["Áè†Â≥∞", "Êó•ÂñÄÂâá"],
                "altitude": { "avg": 4200, "max": 5200, "sleep": 3840 },
                "weather_advice": "ÂØíÂÜ∑ÂõûÊöñ (-5 ~ 10¬∞C)ÔºåÊ∏ÖÊô®ÁúãÊó•Âá∫Ê•µÂÜ∑„ÄÇ",
                "highlights": ["Áè†Â≥∞Êó•Âá∫ (Ë¶ñÂ§©Ê∞£)", "ËøîÂõûÊó•ÂñÄÂâá‰ºëÊï¥", "Êâé‰ªÄÂÄ´Â∏ÉÂØ∫ (Áè≠Á¶™ÈßêÈå´Âú∞)"],
                "stay": "Êó•ÂñÄÂâáÂ∏åÁàæÈ†ìÈÖíÂ∫ó",
                "tips": "ÂõûÂà∞ 3840m ÊúÉË¶∫ÂæóÂëºÂê∏È†ÜÊö¢ÂæàÂ§öÔºå‰ªäÊôöÂèØ‰ª•Ê¥óÂÄãÁÜ±Ê∞¥Êæ°Â•ΩÂ•ΩÁù°‰∏ÄË¶∫„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=Êó•ÂñÄÂâáÂ∏åÁàæÈ†ìÈÖíÂ∫ó"
            },
            {
                "day": 8,
                "date": "2026-04-03",
                "title": "Á©øË∂äËóèÂåóÔºöÂâçÂæÄÁï∂ÈõÑ",
                "locations": ["Êó•ÂñÄÂâá", "Â∞ºÊú®", "Áï∂ÈõÑ"],
                "altitude": { "avg": 4000, "max": 4500, "sleep": 4200 },
                "weather_advice": "È¢®Â§ß‰πæÁá• (0-10¬∞C)ÔºåËçâÂéüÈ¢®Â§ß„ÄÇ",
                "highlights": ["Ê≤øÈÄîËóèÂåóËçâÂéüÈ¢®ÂÖâ", "Èõ™Âè§ÊãâÂ±±Âè£", "Áï∂ÈõÑÁ∏£Âüé (Á¥çÊú®Êé™ÁöÑÈñÄÊà∂)"],
                "stay": "Áï∂ÈõÑÂõõÂ≠£ÂØåÊ∞ßÈÖíÂ∫ó",
                "tips": "Áï∂ÈõÑÊµ∑Êãî 4200mÔºåÊØîÊó•ÂñÄÂâáÈ´òÔºå‰ªäÊôöÈÇÑÊòØË¶ÅÊ≥®ÊÑè‰øùÊöñÂíå‰æõÊ∞ß„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=Áï∂ÈõÑÂõõÂ≠£ÂØåÊ∞ßÈÖíÂ∫ó"
            },
            {
                "day": 9,
                "date": "2026-04-04",
                "title": "Â§©ÊπñÁ¥çÊú®Êé™ÔºöËøîÂõûÊãâËñ©",
                "locations": ["Áï∂ÈõÑ", "Á¥çÊú®Êé™", "ÊãâËñ©"],
                "altitude": { "avg": 4000, "max": 5190, "sleep": 3650 },
                "weather_advice": "ÊπñÈÇäÊ•µÂÜ∑ (-5 ~ 8¬∞C)ÔºåÁ¥çÊú®Êé™ÊπñÈÇäÈ¢®Â¶ÇÂàÄÂâ≤„ÄÇ",
                "highlights": ["ÈÇ£Ê†πÊãâÂ±±Âè£ (ÈÅ†Áú∫Á¥çÊú®Êé™)", "Á¥çÊú®Êé™ (Â§©ÊπñÔºå‰∏âÂ§ßËÅñÊπñ‰πãÈ¶ñ)", "ÊñáÊàêÂÖ¨‰∏ªÂØ¶ÊôØÂäá (Êôö‰∏äÂõûÂà∞ÊãâËñ©)"],
                "stay": "ÊãâËñ©ÁëûÂêâÂ∫¶ÂÅáÈÖíÂ∫ó",
                "tips": "Ë°åÁ®ãÊúÄÂæåÁöÑÈ´òÊµ∑ÊãîÊåëÊà∞„ÄÇÁúãÂÆåÊñáÊàêÂÖ¨‰∏ªÁßÄËºÉÊôöÔºåÊ≥®ÊÑè‰øùÊöñ„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=ÊãâËñ©ÁëûÂêâÂ∫¶ÂÅáÈÖíÂ∫ó"
            },
            {
                "day": 10,
                "date": "2026-04-05",
                "title": "ÂëäÂà•È´òÂéüÔºöÈùíËóèÈêµË∑Ø",
                "locations": ["ÊãâËñ©", "ÁÅ´Ëªä‰∏ä"],
                "altitude": { "avg": 4000, "max": 5072, "sleep": 3000 },
                "weather_advice": "ËªäÂÖßËàíÈÅ©ÔºåËªäÂ§ñÂØíÂÜ∑„ÄÇ",
                "highlights": ["ÈùíËóèÈêµË∑ØËªüËá•È´îÈ©ó", "ÂîêÂè§ÊãâÂ±±Âè£ (ÈêµË∑ØÊúÄÈ´òÈªû 5072m)", "ÂèØÂèØË•øÈáåÁÑ°‰∫∫ÂçÄ (ÁúãËóèÁæöÁæä)"],
                "stay": "ÈùíËóèÈêµË∑ØËªüËá• (Âõõ‰∫∫‰∏ÄÂÆ§)",
                "tips": "ÁÅ´Ëªä‰∏äÊúâ‰æõÊ∞ßÂè£„ÄÇÊîæÈ¨ÜÂøÉÊÉÖÊ¨£Ë≥ûÁ™óÂ§ñÊµÅÂãïÁöÑÈ¢®ÊôØÂ§ßÁâá„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=ÊãâËñ©ÁÅ´ËªäÁ´ô"
            },
            {
                "day": 11,
                "date": "2026-04-06",
                "title": "ÊäµÈÅîË•øÂØßÔºöËΩâÊ©üÂª£Â∑û",
                "locations": ["Ë•øÂØß", "Âª£Â∑û"],
                "altitude": { "avg": 2200, "max": 3000, "sleep": 50 },
                "weather_advice": "ÂõûÊöñ (15-25¬∞C)ÔºåÊäµÈÅîÂª£Â∑ûÂæåËÆäÁÜ±„ÄÇ",
                "highlights": ["ÈùíÊµ∑Êπñ (ËªäÁ™óÈÅ†Áú∫)", "ÊäµÈÅîË•øÂØß (Êµ∑Êãî 2200m)", "È£õÂæÄÂª£Â∑û"],
                "stay": "Âª£Â∑ûËä±ÈÉΩÁôΩÈõ≤ÂúãÈöõÊ©üÂ†¥ÈÄ∏ÊââÈÖíÂ∫ó",
                "tips": "ÂõûÂà∞Âπ≥ÂéüÂèØËÉΩÊúÉÂá∫Áèæ„ÄåÈÜâÊ∞ß„ÄçÂóúÁù°ÂèçÊáâÔºåÂ•ΩÂ•Ω‰ºëÊÅØ„ÄÇ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=Âª£Â∑ûËä±ÈÉΩÁôΩÈõ≤ÂúãÈöõÊ©üÂ†¥ÈÄ∏ÊââÈÖíÂ∫ó"
            },
            {
                "day": 12,
                "date": "2026-04-07",
                "title": "ÊªøËºâËÄåÊ≠∏ÔºöËøîÊäµÂÆ∂Âúí",
                "locations": ["Âª£Â∑û", "Ê°ÉÂúí"],
                "altitude": { "avg": 50, "max": 50, "sleep": 50 },
                "weather_advice": "Ê∫´ÊöñËàíÈÅ© (22-28¬∞C)„ÄÇ",
                "highlights": ["Âª£Â∑ûÁôΩÈõ≤Ê©üÂ†¥", "ÊäµÈÅîÊ°ÉÂúíÊ©üÂ†¥ (13:30)", "Êê≠È´òÈêµÂõûÊ∫´ÊöñÁöÑÂÆ∂"],
                "stay": "ÁîúËúúÁöÑÂÆ∂",
                "tips": "Êï¥ÁêÜÁÖßÁâáÔºåÂàÜ‰∫´Ë•øËóèÂõûÊÜ∂ÔºÅ",
                "map_url": "https://www.google.com/maps/search/?api=1&query=Ê°ÉÂúíÂúãÈöõÊ©üÂ†¥"
            }
        ];

        createApp({
            setup() {
                const itinerary = ref([]);
                const currentIndex = ref(0);
                const loading = ref(true); // Still keep loading state for visual consistency
                const error = ref(null);
                const isDrawerOpen = ref(false);
                const simulatedToday = '2026-04-01';
                const width = ref(window.innerWidth);

                const onResize = () => {
                    width.value = window.innerWidth;
                    if (width.value >= 768) {
                        isDrawerOpen.value = false;
                    }
                };

                // Health Tracker Logic (V3.2)
                const healthRecords = ref([]);
                const newSpo2 = ref('');
                const newHr = ref('');

                const loadHealthData = () => {
                    const stored = localStorage.getItem('tibet_health_v1');
                    if (stored) {
                        try {
                            healthRecords.value = JSON.parse(stored);
                        } catch (e) {
                            console.error("Failed to parse health records", e);
                            healthRecords.value = [];
                        }
                    }
                };

                const saveHealthData = () => {
                    localStorage.setItem('tibet_health_v1', JSON.stringify(healthRecords.value));
                };

                const currentDateRecords = computed(() => {
                    if (!currentDay.value) return [];
                    return healthRecords.value
                        .filter(r => r.date === currentDay.value.date)
                        .sort((a, b) => b.id - a.id); // Newest first
                });

                const addHealthRecord = () => {
                    if (!newSpo2.value || !newHr.value) return;
                    if (newSpo2.value < 0 || newSpo2.value > 100) {
                        alert('SpO2 Êï∏ÂÄº‰∏çÊ≠£Á¢∫ (0-100)');
                        return;
                    }

                    const now = new Date();
                    const record = {
                        id: Date.now(),
                        date: currentDay.value.date,
                        time: now.toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit', hour12: false }),
                        spo2: newSpo2.value,
                        hr: newHr.value
                    };

                    healthRecords.value.push(record);
                    saveHealthData();
                    newSpo2.value = '';
                    newHr.value = '';
                };

                const deleteHealthRecord = (id) => {
                    if (confirm('Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÁ≠ÜÁ¥ÄÈåÑÂóéÔºü')) {
                        healthRecords.value = healthRecords.value.filter(r => r.id !== id);
                        saveHealthData();
                    }
                };

                const copyHealthRecords = () => {
                    if (currentDateRecords.value.length === 0) {
                        alert('‰ªäÊó•Â∞öÁÑ°Á¥ÄÈåÑÂèØË§áË£Ω');
                        return;
                    }

                    const dateStr = currentDay.value.date;
                    const lines = currentDateRecords.value.map(r =>
                        `${r.time} SpO2:${r.spo2}% HR:${r.hr}bpm`
                    );
                    // Reverse to show oldest first in text list? Or keeps newest first?
                    // Usually logs are chronological for reading. Let's reverse for copy.
                    const textLines = [...lines].reverse();

                    const text = `üìÖ ${dateStr} ÂÅ•Â∫∑Á¥ÄÈåÑ\n` + textLines.join('\n');

                    navigator.clipboard.writeText(text).then(() => {
                        alert('‚úÖ Â∑≤Ë§áË£ΩÂà∞Ââ™Ë≤ºÁ∞øÔºÅ');
                    }).catch(err => {
                        alert('Ë§áË£ΩÂ§±Êïó');
                    });
                };

                // Initialize Data
                const init = () => {
                    try {
                        loading.value = true;
                        // Use inline data
                        itinerary.value = itineraryData;
                        resetToToday();
                    } catch (e) {
                        console.error(e);
                        error.value = "Ë≥áÊñôËºâÂÖ•Â§±Êïó: " + e.message;
                    } finally {
                        loading.value = false;
                    }
                };

                const currentDay = computed(() => {
                    if (itinerary.value.length === 0) return null;
                    return itinerary.value[currentIndex.value];
                });

                const isHighAltitude = computed(() => {
                    if (!currentDay.value) return false;
                    return currentDay.value.altitude.max > 3500 || currentDay.value.altitude.sleep > 3500;
                });

                const isToday = computed(() => {
                    if (!currentDay.value) return false;
                    return currentDay.value.date === simulatedToday;
                });

                const formattedLocations = computed(() => {
                    if (!currentDay.value) return '';
                    return currentDay.value.locations.join(' ‚ûù ');
                });

                const openMap = (url) => {
                    window.open(url, '_blank');
                };

                const changeDay = (delta) => {
                    const newIndex = currentIndex.value + delta;
                    if (newIndex >= 0 && newIndex < itinerary.value.length) {
                        currentIndex.value = newIndex;
                        const scrollContainer = document.getElementById('main-content-scroll');
                        if (scrollContainer) scrollContainer.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                };

                const selectDay = (index) => {
                    currentIndex.value = index;
                    isDrawerOpen.value = false;
                    const scrollContainer = document.getElementById('main-content-scroll');
                    if (scrollContainer) scrollContainer.scrollTo({ top: 0, behavior: 'smooth' });
                };

                const resetToToday = () => {
                    const foundIndex = itinerary.value.findIndex(d => d.date === simulatedToday);
                    if (foundIndex !== -1) {
                        currentIndex.value = foundIndex;
                    } else {
                        currentIndex.value = 0;
                    }
                };

                onMounted(() => {
                    init();
                    loadHealthData();
                    window.addEventListener('resize', onResize);
                });

                onUnmounted(() => {
                    window.removeEventListener('resize', onResize);
                });


                return {
                    itinerary,
                    currentIndex,
                    currentDay,
                    loading,
                    error,
                    isHighAltitude,
                    isToday,
                    isDrawerOpen,
                    width,
                    openMap,
                    changeDay,
                    selectDay,
                    resetToToday,
                    formattedLocations,
                    // Health Tracker
                    healthRecords,
                    newSpo2,
                    newHr,
                    currentDateRecords,
                    addHealthRecord,
                    deleteHealthRecord,
                    copyHealthRecords
                };
            }
        }).mount('#app');
    </script>
</body>

</html>